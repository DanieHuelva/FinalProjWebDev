

{% block content %}
    <header class="container center">
    <h1><img style="height: 60px" src="/img/todo-white.svg"> TODOApp</h1>

    <div id="lottie-animation" style="position: absolute; right: 50px; top: -10px; width: 130px; height: 130px; display: none; z-index: 9999;"></div>

    <input class="form-control" type="search"
        style="float: right; width: 300px"
        name="search" placeholder="Begin Typing To Search" 
        hx-get="/search" 
        hx-trigger="input changed delay:500ms, search" 
        hx-target="#todos-list">

</header>
    <div id="calendar"></div>
    
{% endblock %}

{% block extra_js %}
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@3.2.0/dist/fullcalendar.min.css" rel="stylesheet" />

    <!-- jQuery (needed for FullCalendar) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Moment.js (needed for FullCalendar) -->
    <script src="https://cdn.jsdelivr.net/npm/moment@2.18.1/moment.min.js"></script>

    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@3.2.0/dist/fullcalendar.min.js"></script>


    <script>
        $(document).ready(function() {
            // Prepare the events array based on the todos passed from the backend
            var events = [
                {% for todo in todos %}
                    {
                        title: "{{ todo.text }}",  // Title of the event (Todo text)
                        start: "{{ todo.due_date.strftime('%Y-%m-%d') }}",  // Due date as the event start date
                        color: "{{ 'red' if todo.due_date < now else 'green' }}"  // Color based on whether the due date has passed
                    },
                {% endfor %}
            ];

            // Initialize FullCalendar with the events array
            $('#calendar').fullCalendar({
                events: events
            });
        });
    </script>
{% endblock %}
